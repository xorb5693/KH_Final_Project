<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="admin">
<!-- 혜진_200626_아작스에서 memberlist를 가져오는 sql문 작성 -->
<!-- 혜진_200629_더보기 기능 추가하여 memberlist sql문 작성 -->
	<select id="memberList" parameterType="memberSearch"
		resultType="member">
		select
		member_no as memberNo,
		member_profile as memberProfile,
		member_id as memberId,
		member_name as memberName,
		member_nick as memberNick,
		expire_date as expireDate,
		member_level as memberLevel,
		card
			from(select rownum as rnum,
			m.*from(select
				*
				from member
				where member_level='1'
				<if test="checkbox1==1">
					and expire_date is null
				</if>
				<if test="checkbox2==1">
					and card is null
				</if>
				and (member_id like '%'||#{searchWord}||'%' or member_name like '%'||#{searchWord}||'%' or member_nick like '%'||#{searchWord}||'%')
				)m) where (rnum between #{start} and #{end})
	</select>
<!-- 혜진_200629_팝업창에 memberId를 매개변수로 해당 회원 정보를 조회 -->	
	<select id="oneMemberSearch" parameterType="string" resultType="member">
		select
			member_no as memberNo,
			member_profile as memberProfile,
			member_id as memberId,
			member_name as memberName,
			member_nick as memberNick,
			expire_date as expireDate,
			member_level as memberLevel,
			phone,
			email,
			member_profile as profile,
			card
		from member where member_id = #{_parameter}
	</select>
</mapper>
